{"ast":null,"code":"// HTTP Request\nvar BASE_URL=\"http://localhost:3001\";var SIGNUP_URL=\"\".concat(BASE_URL,\"/users\");var LOGIN_URL=\"\".concat(BASE_URL,\"/login\");var PERSIST_URL=\"\".concat(BASE_URL,\"/auth\");var setUserAction=function setUserAction(userObj){return{type:\"SET_USER\",payload:userObj};};var clearUserAction=function clearUserAction(){return{type:\"CLEAR_USER\",payload:{}};};var newUserToDB=function newUserToDB(userObj){return function(dispatch){var config={method:\"POST\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify(userObj)};fetch(SIGNUP_URL,config).then(function(res){return res.json();}).then(function(userData){// debugger;\ndispatch(setUserAction(userData.user));localStorage.setItem(\"token\",userData.token);}).catch(function(error){return console.log(error);});};};var loginUserToDB=function loginUserToDB(userObj){return function(dispatch){var config={method:\"POST\",headers:{Authorization:\"Bearer \".concat(localStorage.token),\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify(userObj)};fetch(LOGIN_URL,config).then(function(res){return res.json();}).then(function(userData){dispatch(setUserAction(userData.user));localStorage.setItem(\"token\",userData.token);}).catch(function(error){return console.log(error);});};};var persistUser=function persistUser(){return function(dispatch){var config={method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.token)}};fetch(PERSIST_URL,config).then(function(res){return res.json();}).then(function(userData){dispatch(setUserAction(userData));}).catch(function(error){return console.log(error);});};};var patchUserBalanceToDB=function patchUserBalanceToDB(userObj,stockPrice){return function(dispatch){var userBalance=userObj.balance-stockPrice;var config={method:\"PATCH\",headers:{Authorization:\"Bearer \".concat(localStorage.token),Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({balance:userBalance})};fetch(\"\".concat(SIGNUP_URL,\"/\").concat(userObj.id),config).then(function(res){return res.json();}).then(function(userData){return dispatch(setUserAction(userData));}).catch(function(error){return console.log(error);});};};var logoutUser=function logoutUser(){return function(dispatch){dispatch(clearUserAction());localStorage.clear();};};export default{newUserToDB:newUserToDB,loginUserToDB:loginUserToDB,persistUser:persistUser,logoutUser:logoutUser,patchUserBalanceToDB:patchUserBalanceToDB};","map":{"version":3,"sources":["/Users/hamidoudiallo/Desktop/portfolio_stocks/frontend/src/redux/actions/loginActions.js"],"names":["BASE_URL","SIGNUP_URL","LOGIN_URL","PERSIST_URL","setUserAction","userObj","type","payload","clearUserAction","newUserToDB","dispatch","config","method","headers","Accept","body","JSON","stringify","fetch","then","res","json","userData","user","localStorage","setItem","token","catch","error","console","log","loginUserToDB","Authorization","persistUser","patchUserBalanceToDB","stockPrice","userBalance","balance","id","logoutUser","clear"],"mappings":"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","sourcesContent":["// HTTP Request\nconst BASE_URL = \"http://localhost:3001\";\nconst SIGNUP_URL = `${BASE_URL}/users`;\nconst LOGIN_URL = `${BASE_URL}/login`;\nconst PERSIST_URL = `${BASE_URL}/auth`;\n\nconst setUserAction = userObj => ({\n\ttype: \"SET_USER\",\n\tpayload: userObj\n});\n\nconst clearUserAction = () => ({\n\ttype: \"CLEAR_USER\",\n\tpayload: {}\n});\n\nconst newUserToDB = userObj => dispatch => {\n\tlet config = {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAccept: \"application/json\"\n\t\t},\n\t\tbody: JSON.stringify(userObj)\n\t};\n\tfetch(SIGNUP_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\t// debugger;\n\t\t\tdispatch(setUserAction(userData.user));\n\t\t\tlocalStorage.setItem(\"token\", userData.token);\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst loginUserToDB = userObj => dispatch => {\n\tlet config = {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.token}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAccept: \"application/json\"\n\t\t},\n\t\tbody: JSON.stringify(userObj)\n\t};\n\tfetch(LOGIN_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\tdispatch(setUserAction(userData.user));\n\t\t\tlocalStorage.setItem(\"token\", userData.token);\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst persistUser = () => dispatch => {\n\tlet config = {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.token}`\n\t\t}\n\t};\n\n\tfetch(PERSIST_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\tdispatch(setUserAction(userData));\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst patchUserBalanceToDB = (userObj, stockPrice) => dispatch => {\n\tlet userBalance = userObj.balance - stockPrice;\n\tlet config = {\n\t\tmethod: \"PATCH\",\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.token}`,\n\t\t\tAccept: \"application/json\",\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tbalance: userBalance\n\t\t})\n\t};\n\tfetch(`${SIGNUP_URL}/${userObj.id}`, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => dispatch(setUserAction(userData)))\n\t\t.catch(error => console.log(error));\n};\n\nconst logoutUser = () => dispatch => {\n\tdispatch(clearUserAction());\n\tlocalStorage.clear();\n};\n\nexport default {\n\tnewUserToDB,\n\tloginUserToDB,\n\tpersistUser,\n\tlogoutUser,\n\tpatchUserBalanceToDB\n};\n"]},"metadata":{},"sourceType":"module"}