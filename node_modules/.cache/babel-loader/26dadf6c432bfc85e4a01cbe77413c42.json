{"ast":null,"code":"import _slicedToArray from\"/Users/hamidoudiallo/Desktop/react_projects/portfolio_stocks/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{makeStyles}from\"@material-ui/core/styles\";import{Button}from\"@material-ui/core\";import purchaseActions from\"../../redux/actions/purchaseActions\";import loginActions from\"../../redux/actions/loginActions\";import stockActions from\"../../redux/actions/stocksActions\";var useStyles=makeStyles({root:{marginTop:\"100px\"},purchaseForm:{display:\"flex\",flexDirection:\"column\",width:\"30%\",margin:\"0 auto\"},label:{textAlign:\"center\"},input:{textAlign:\"center\",padding:\"10px\",marginTop:\"10px\"},button:{width:\"100%\",borderRadius:\"10px\",background:\"#a12bcc\",color:\"whitesmoke\",margin:\"20px auto 0 auto\",\"&:hover\":{background:\"#a12bcc\",color:\"whitesmoke\"}},closedButton:{width:\"100%\",borderRadius:\"10px\",background:\"#a12bcc\",color:\"whitesmoke\",margin:\"20px auto 0 auto\",\"&:hover\":{background:\"#a12bcc\",color:\"whitesmoke\"}},low:{color:\"#f50c2b\"},even:{color:\"grey\"},high:{color:\"#0af229\"},div:{display:\"flex\",width:\"8%\",margin:\"0 auto\"},ticker:{textAlign:\"center\",marginRight:\"10px\"},userBalance:{textAlign:\"center\"}});var PurchaseForm=function PurchaseForm(props){var classes=useStyles();var dispatch=useDispatch();var currentUser=useSelector(function(state){return state.login.currentUser;});var currentStock=JSON.parse(localStorage.stock);var _useState=useState(),_useState2=_slicedToArray(_useState,2),quantityInput=_useState2[0],setQuantityInput=_useState2[1];var current_price=parseInt(currentStock.current_price);var userBalance=parseInt(currentUser.balance);console.log(currentUser.balance,currentStock.current_price);var renderTicker=function renderTicker(){if(currentStock.current_price>currentStock.open_price){return/*#__PURE__*/React.createElement(\"h3\",{className:classes.high},\" \",currentStock.ticker);}else if(currentStock.current_price<currentStock.open_price){return/*#__PURE__*/React.createElement(\"h3\",{className:classes.low},currentStock.ticker);}else{return/*#__PURE__*/React.createElement(\"h3\",{className:classes.med},\" \",currentStock.ticker);}};var handleChange=function handleChange(evt){var stockQuantity=parseInt(evt.target.value);setQuantityInput(stockQuantity);};var handleSubmit=function handleSubmit(evt){var stockPrice=currentStock.current_price*quantityInput;console.log(\"clicked\");evt.preventDefault();dispatch(purchaseActions.postTransactionToDB(stockPrice,quantityInput,currentUser.id,currentStock.id));dispatch(loginActions.patchUserBalanceToDB(currentUser,stockPrice));dispatch(stockActions.patchStockToDB(currentStock,quantityInput));setQuantityInput();setTimeout(function(){props.history.push(\"/stocks\");},1000);};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(\"h2\",{className:classes.userBalance},\"CASH - $\",currentUser.balance),/*#__PURE__*/React.createElement(\"div\",{className:classes.div},/*#__PURE__*/React.createElement(\"h4\",{className:classes.ticker},\"Ticker:\"),renderTicker()),/*#__PURE__*/React.createElement(\"form\",{className:classes.purchaseForm,onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"label\",{className:classes.label},\"QTY:\"),/*#__PURE__*/React.createElement(\"input\",{className:classes.input,type:\"text\",placeholder:\"Quantity\",onChange:handleChange}),userBalance>current_price?/*#__PURE__*/React.createElement(Button,{className:classes.button,disabled:false,variant:\"outlined\",type:\"submit\"},\"Buy\"):/*#__PURE__*/React.createElement(Button,{className:classes.button,disabled:true,variant:\"outlined\",type:\"submit\"},\"Buy\")));};export default PurchaseForm;","map":{"version":3,"sources":["/Users/hamidoudiallo/Desktop/react_projects/portfolio_stocks/frontend/src/components/pages/PurchaseForm.jsx"],"names":["React","useState","useSelector","useDispatch","makeStyles","Button","purchaseActions","loginActions","stockActions","useStyles","root","marginTop","purchaseForm","display","flexDirection","width","margin","label","textAlign","input","padding","button","borderRadius","background","color","closedButton","low","even","high","div","ticker","marginRight","userBalance","PurchaseForm","props","classes","dispatch","currentUser","state","login","currentStock","JSON","parse","localStorage","stock","quantityInput","setQuantityInput","current_price","parseInt","balance","console","log","renderTicker","open_price","med","handleChange","evt","stockQuantity","target","value","handleSubmit","stockPrice","preventDefault","postTransactionToDB","id","patchUserBalanceToDB","patchStockToDB","setTimeout","history","push"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Button } from \"@material-ui/core\";\n\nimport purchaseActions from \"../../redux/actions/purchaseActions\";\nimport loginActions from \"../../redux/actions/loginActions\";\nimport stockActions from \"../../redux/actions/stocksActions\";\n\nconst useStyles = makeStyles({\n\troot: {\n\t\tmarginTop: \"100px\"\n\t},\n\tpurchaseForm: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\twidth: \"30%\",\n\t\tmargin: \"0 auto\"\n\t},\n\tlabel: {\n\t\ttextAlign: \"center\"\n\t},\n\tinput: {\n\t\ttextAlign: \"center\",\n\t\tpadding: \"10px\",\n\t\tmarginTop: \"10px\"\n\t},\n\tbutton: {\n\t\twidth: \"100%\",\n\t\tborderRadius: \"10px\",\n\t\tbackground: \"#a12bcc\",\n\t\tcolor: \"whitesmoke\",\n\t\tmargin: \"20px auto 0 auto\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#a12bcc\",\n\t\t\tcolor: \"whitesmoke\"\n\t\t}\n\t},\n\tclosedButton: {\n\t\twidth: \"100%\",\n\t\tborderRadius: \"10px\",\n\t\tbackground: \"#a12bcc\",\n\t\tcolor: \"whitesmoke\",\n\t\tmargin: \"20px auto 0 auto\",\n\t\t\"&:hover\": {\n\t\t\tbackground: \"#a12bcc\",\n\t\t\tcolor: \"whitesmoke\"\n\t\t}\n\t},\n\tlow: {\n\t\tcolor: \"#f50c2b\"\n\t},\n\teven: {\n\t\tcolor: \"grey\"\n\t},\n\thigh: {\n\t\tcolor: \"#0af229\"\n\t},\n\tdiv: {\n\t\tdisplay: \"flex\",\n\t\twidth: \"8%\",\n\t\tmargin: \"0 auto\"\n\t},\n\tticker: {\n\t\ttextAlign: \"center\",\n\t\tmarginRight: \"10px\"\n\t},\n\tuserBalance: {\n\t\ttextAlign: \"center\"\n\t}\n});\nconst PurchaseForm = props => {\n\tconst classes = useStyles();\n\tconst dispatch = useDispatch();\n\tconst currentUser = useSelector(state => state.login.currentUser);\n\tconst currentStock = JSON.parse(localStorage.stock);\n\tconst [quantityInput, setQuantityInput] = useState();\n\tconst current_price = parseInt(currentStock.current_price);\n\tconst userBalance = parseInt(currentUser.balance);\n\tconsole.log(currentUser.balance, currentStock.current_price);\n\tconst renderTicker = () => {\n\t\tif (currentStock.current_price > currentStock.open_price) {\n\t\t\treturn <h3 className={classes.high}> {currentStock.ticker}</h3>;\n\t\t} else if (currentStock.current_price < currentStock.open_price) {\n\t\t\treturn <h3 className={classes.low}>{currentStock.ticker}</h3>;\n\t\t} else {\n\t\t\treturn <h3 className={classes.med}> {currentStock.ticker}</h3>;\n\t\t}\n\t};\n\n\tconst handleChange = evt => {\n\t\tlet stockQuantity = parseInt(evt.target.value);\n\t\tsetQuantityInput(stockQuantity);\n\t};\n\n\tconst handleSubmit = evt => {\n\t\tlet stockPrice = currentStock.current_price * quantityInput;\n\t\tconsole.log(\"clicked\");\n\t\tevt.preventDefault();\n\n\t\tdispatch(\n\t\t\tpurchaseActions.postTransactionToDB(\n\t\t\t\tstockPrice,\n\t\t\t\tquantityInput,\n\t\t\t\tcurrentUser.id,\n\t\t\t\tcurrentStock.id\n\t\t\t)\n\t\t);\n\t\tdispatch(loginActions.patchUserBalanceToDB(currentUser, stockPrice));\n\t\tdispatch(stockActions.patchStockToDB(currentStock, quantityInput));\n\n\t\tsetQuantityInput();\n\t\tsetTimeout(() => {\n\t\t\tprops.history.push(\"/stocks\");\n\t\t}, 1000);\n\t};\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<h2 className={classes.userBalance}>CASH - ${currentUser.balance}</h2>\n\t\t\t<div className={classes.div}>\n\t\t\t\t<h4 className={classes.ticker}>Ticker:</h4>\n\t\t\t\t{renderTicker()}\n\t\t\t</div>\n\t\t\t<form className={classes.purchaseForm} onSubmit={handleSubmit}>\n\t\t\t\t<label className={classes.label}>QTY:</label>\n\t\t\t\t<input\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Quantity\"\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t/>\n\t\t\t\t{userBalance > current_price ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={false}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\tBuy\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tdisabled={true}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\tBuy\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default PurchaseForm;\n"]},"metadata":{},"sourceType":"module"}