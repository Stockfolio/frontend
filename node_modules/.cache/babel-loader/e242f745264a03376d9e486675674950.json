{"ast":null,"code":"// HTTP Request\nconst BASE_URL = \"http://localhost:3001\";\nconst SIGNUP_URL = `${BASE_URL}/users`;\nconst LOGIN_URL = `${BASE_URL}/login`;\nconst PERSIST_URL = `${BASE_URL}/auth`;\n\nconst setUserAction = userObj => ({\n  type: \"SET_USER\",\n  payload: userObj\n});\n\nconst clearUserAction = () => ({\n  type: \"CLEAR_USER\",\n  payload: {}\n});\n\nconst newUserToDB = userObj => dispatch => {\n  let config = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    },\n    body: JSON.stringify(userObj)\n  };\n  fetch(SIGNUP_URL, config).then(res => res.json()).then(userData => {\n    // debugger;\n    dispatch(setUserAction(userData.user));\n    localStorage.setItem(\"token\", userData.token);\n  }).catch(error => console.log(error));\n};\n\nconst loginUserToDB = userObj => dispatch => {\n  let config = {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${localStorage.token}`,\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    },\n    body: JSON.stringify(userObj)\n  };\n  fetch(LOGIN_URL, config).then(res => res.json()).then(userData => {\n    dispatch(setUserAction(userData.user));\n  }).catch(error => console.log(error));\n};\n\nconst persistUser = () => dispatch => {\n  let config = {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${localStorage.token}`\n    }\n  };\n  fetch(PERSIST_URL, config).then(res => res.json()).then(userData => {\n    dispatch(setUserAction(userData));\n  }).catch(error => console.log(error));\n};\n\nconst logoutUser = () => dispatch => {\n  dispatch(clearUserAction());\n  localStorage.clear();\n};\n\nexport default {\n  newUserToDB,\n  loginUserToDB,\n  persistUser,\n  logoutUser\n};","map":{"version":3,"sources":["/Users/hamidoudiallo/Desktop/portfolio_stocks/frontend/src/redux/actions/loginActions.js"],"names":["BASE_URL","SIGNUP_URL","LOGIN_URL","PERSIST_URL","setUserAction","userObj","type","payload","clearUserAction","newUserToDB","dispatch","config","method","headers","Accept","body","JSON","stringify","fetch","then","res","json","userData","user","localStorage","setItem","token","catch","error","console","log","loginUserToDB","Authorization","persistUser","logoutUser","clear"],"mappings":"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","sourcesContent":["// HTTP Request\nconst BASE_URL = \"http://localhost:3001\";\nconst SIGNUP_URL = `${BASE_URL}/users`;\nconst LOGIN_URL = `${BASE_URL}/login`;\nconst PERSIST_URL = `${BASE_URL}/auth`;\n\nconst setUserAction = userObj => ({\n\ttype: \"SET_USER\",\n\tpayload: userObj\n});\n\nconst clearUserAction = () => ({\n\ttype: \"CLEAR_USER\",\n\tpayload: {}\n});\n\nconst newUserToDB = userObj => dispatch => {\n\tlet config = {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAccept: \"application/json\"\n\t\t},\n\t\tbody: JSON.stringify(userObj)\n\t};\n\tfetch(SIGNUP_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\t// debugger;\n\t\t\tdispatch(setUserAction(userData.user));\n\t\t\tlocalStorage.setItem(\"token\", userData.token);\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst loginUserToDB = userObj => dispatch => {\n\tlet config = {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.token}`,\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAccept: \"application/json\"\n\t\t},\n\t\tbody: JSON.stringify(userObj)\n\t};\n\tfetch(LOGIN_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\tdispatch(setUserAction(userData.user));\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst persistUser = () => dispatch => {\n\tlet config = {\n\t\tmethod: \"GET\",\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${localStorage.token}`\n\t\t}\n\t};\n\n\tfetch(PERSIST_URL, config)\n\t\t.then(res => res.json())\n\t\t.then(userData => {\n\t\t\tdispatch(setUserAction(userData));\n\t\t})\n\t\t.catch(error => console.log(error));\n};\n\nconst logoutUser = () => dispatch => {\n\tdispatch(clearUserAction());\n\tlocalStorage.clear();\n};\n\nexport default {\n\tnewUserToDB,\n\tloginUserToDB,\n\tpersistUser,\n\tlogoutUser\n};\n"]},"metadata":{},"sourceType":"module"}